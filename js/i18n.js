// i18n.js - Internationalization for TypeScript Error Analyzer
const i18n = {
    ko: {
        title: 'TypeScript ì˜¤ë¥˜ ë¶„ì„ê¸°',
        subtitle: 'ë³µìž¡í•œ íƒ€ìž… ì˜¤ë¥˜ë¥¼ ë¶„ì„í•˜ì—¬ ì–´ë–¤ í•„ë“œê°€ ë¬¸ì œì¸ì§€ ëª…í™•í•˜ê²Œ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤',
        inputTitle: 'ì˜¤ë¥˜ ë©”ì‹œì§€ ìž…ë ¥',
        inputPlaceholder: 'TypeScript ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...',
        analyzeBtn: 'ì˜¤ë¥˜ ë¶„ì„',
        clearBtn: 'ì´ˆê¸°í™”',
        sampleBtn: 'ì˜ˆì‹œ ë¶ˆëŸ¬ì˜¤ê¸°',
        resultTitle: 'ë¶„ì„ ê²°ê³¼',
        copyBtn: 'ë³µì‚¬',
        supportedTitle: 'ðŸŽ¯ ë¶„ì„ ê°€ëŠ¥í•œ ì˜¤ë¥˜',
        supported1: 'ë°°ì—´/ê°ì²´ íƒ€ìž… ë¶ˆì¼ì¹˜',
        supported2: 'ì†ì„± ëˆ„ë½ ì˜¤ë¥˜',
        supported3: 'ì¤‘ì²©ëœ íƒ€ìž… ì˜¤ë¥˜',
        supported4: 'ìœ ë‹ˆì˜¨ íƒ€ìž… ë¬¸ì œ',
        supported5: 'ì œë„¤ë¦­ íƒ€ìž… ì˜¤ë¥˜',
        supported6: 'ë¦¬í„°ëŸ´ íƒ€ìž… ë¶ˆì¼ì¹˜',
        supported7: 'ëª¨ë“ˆ ì°¾ê¸° ì˜¤ë¥˜',
        supported8: 'ë³€ìˆ˜/íƒ€ìž… ë¯¸ì¡´ìž¬',
        howToTitle: 'ðŸ“– ì‚¬ìš© ë°©ë²•',
        howTo1: 'TypeScript ì˜¤ë¥˜ë¥¼ ë³µì‚¬',
        howTo2: 'ìž…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸°',
        howTo3: 'ë¶„ì„ ë²„íŠ¼ í´ë¦­',
        howTo4: 'ë¬¸ì œì ê³¼ í•´ê²°ì±… í™•ì¸',
        aboutLink: 'ì†Œê°œ',
        privacyLink: 'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨',
        termsLink: 'ì´ìš©ì•½ê´€',
        alertEmpty: 'ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”!',
        copied: 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!',
        foundProblems: 'ë°œê²¬ëœ ë¬¸ì œ',
        arrayObjectMismatch: 'ê°ì²´(Object)ë¥¼ ë°°ì—´(Array)ì´ í•„ìš”í•œ ê³³ì— ì „ë‹¬í–ˆìŠµë‹ˆë‹¤!',
        missingProp: 'ëˆ„ë½ëœ ì†ì„±',
        typeMismatch: 'íƒ€ìž… ë¶ˆì¼ì¹˜',
        arrayMismatch: 'ë°°ì—´/ê°ì²´ íƒ€ìž… ë¶ˆì¼ì¹˜',
        genericError: 'ì œë„¤ë¦­ íƒ€ìž… ì˜¤ë¥˜',
        unionError: 'ìœ ë‹ˆì˜¨ íƒ€ìž… ì˜¤ë¥˜',
        literalError: 'ë¦¬í„°ëŸ´ íƒ€ìž… ë¶ˆì¼ì¹˜',
        moduleError: 'ëª¨ë“ˆ ì°¾ê¸° ì‹¤íŒ¨',
        notFoundError: 'ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì´ë¦„',
        overloadError: 'ì˜¤ë²„ë¡œë“œ ë§¤ì¹­ ì‹¤íŒ¨',
        implicitAnyError: 'ì•”ì‹œì  any íƒ€ìž…',
        providedType: 'ì „ë‹¬í•œ íƒ€ìž…',
        expectedType: 'ê¸°ëŒ€í•˜ëŠ” íƒ€ìž…',
        solution: 'í•´ê²° ë°©ë²•',
        wrapArray: 'ë‹¤ìŒ ì†ì„±ë“¤ì„ ë°°ì—´ë¡œ ê°ì‹¸ì£¼ì„¸ìš”:',
        wrongCode: '// ìž˜ëª»ëœ ì½”ë“œ',
        correctCode: '// ì˜¬ë°”ë¥¸ ì½”ë“œ',
        viewFullError: 'ì „ì²´ ì˜¤ë¥˜ ë©”ì‹œì§€ ë³´ê¸°',
        requiredProps: 'í•„ìš”í•œ ì†ì„±',
        array: 'ë°°ì—´',
        object: 'ê°ì²´',
        string: 'ë¬¸ìžì—´',
        number: 'ìˆ«ìž',
        boolean: 'ë¶ˆë¦¬ì–¸',
        installModule: 'ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ê±°ë‚˜ ê²½ë¡œë¥¼ í™•ì¸í•˜ì„¸ìš”:',
        checkName: 'ë³€ìˆ˜/íƒ€ìž… ì´ë¦„ì„ í™•ì¸í•˜ì„¸ìš”:',
        didYouMean: 'í˜¹ì‹œ ì´ê²ƒì„ ì˜ë¯¸í•˜ì…¨ë‚˜ìš”?'
    },
    en: {
        title: 'TypeScript Error Analyzer',
        subtitle: 'Analyze complex type errors and clearly identify which fields are problematic',
        inputTitle: 'Enter Error Message',
        inputPlaceholder: 'Paste your TypeScript error message here...',
        analyzeBtn: 'Analyze Error',
        clearBtn: 'Clear',
        sampleBtn: 'Load Sample',
        resultTitle: 'Analysis Result',
        copyBtn: 'Copy',
        supportedTitle: 'ðŸŽ¯ Supported Errors',
        supported1: 'Array/Object type mismatch',
        supported2: 'Missing property errors',
        supported3: 'Nested type errors',
        supported4: 'Union type problems',
        supported5: 'Generic type errors',
        supported6: 'Literal type mismatch',
        supported7: 'Module not found',
        supported8: 'Cannot find name',
        howToTitle: 'ðŸ“– How to Use',
        howTo1: 'Copy TypeScript error',
        howTo2: 'Paste into input field',
        howTo3: 'Click analyze button',
        howTo4: 'Check problems and solutions',
        aboutLink: 'About',
        privacyLink: 'Privacy Policy',
        termsLink: 'Terms of Service',
        alertEmpty: 'Please enter an error message!',
        copied: 'Copied!',
        foundProblems: 'Problems Found',
        arrayObjectMismatch: 'You passed an Object where an Array was expected!',
        missingProp: 'Missing Property',
        typeMismatch: 'Type Mismatch',
        arrayMismatch: 'Array/Object Type Mismatch',
        genericError: 'Generic Type Error',
        unionError: 'Union Type Error',
        literalError: 'Literal Type Mismatch',
        moduleError: 'Module Not Found',
        notFoundError: 'Cannot Find Name',
        overloadError: 'No Overload Matches',
        implicitAnyError: 'Implicit Any Type',
        providedType: 'Provided Type',
        expectedType: 'Expected Type',
        solution: 'Solution',
        wrapArray: 'Wrap the following properties in an array:',
        wrongCode: '// Wrong code',
        correctCode: '// Correct code',
        viewFullError: 'View Full Error Message',
        requiredProps: 'Required properties',
        array: 'Array',
        object: 'Object',
        string: 'String',
        number: 'Number',
        boolean: 'Boolean',
        installModule: 'Install the module or check the path:',
        checkName: 'Check the variable/type name:',
        didYouMean: 'Did you mean?'
    },
    ja: {
        title: 'TypeScript ã‚¨ãƒ©ãƒ¼åˆ†æžãƒ„ãƒ¼ãƒ«',
        subtitle: 'è¤‡é›‘ãªåž‹ã‚¨ãƒ©ãƒ¼ã‚’åˆ†æžã—ã€ã©ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å•é¡ŒãŒã‚ã‚‹ã‹ã‚’æ˜Žç¢ºã«ç¤ºã—ã¾ã™',
        inputTitle: 'ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›',
        inputPlaceholder: 'TypeScriptã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„...',
        analyzeBtn: 'ã‚¨ãƒ©ãƒ¼åˆ†æž',
        clearBtn: 'ã‚¯ãƒªã‚¢',
        sampleBtn: 'ã‚µãƒ³ãƒ—ãƒ«ã‚’èª­ã¿è¾¼ã‚€',
        resultTitle: 'åˆ†æžçµæžœ',
        copyBtn: 'ã‚³ãƒ”ãƒ¼',
        supportedTitle: 'ðŸŽ¯ å¯¾å¿œã‚¨ãƒ©ãƒ¼',
        supported1: 'é…åˆ—/ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåž‹ã®ä¸ä¸€è‡´',
        supported2: 'ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ¬ è½ã‚¨ãƒ©ãƒ¼',
        supported3: 'ãƒã‚¹ãƒˆã•ã‚ŒãŸåž‹ã‚¨ãƒ©ãƒ¼',
        supported4: 'ãƒ¦ãƒ‹ã‚ªãƒ³åž‹ã®å•é¡Œ',
        supported5: 'ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åž‹ã‚¨ãƒ©ãƒ¼',
        supported6: 'ãƒªãƒ†ãƒ©ãƒ«åž‹ã®ä¸ä¸€è‡´',
        supported7: 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„',
        supported8: 'åå‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„',
        howToTitle: 'ðŸ“– ä½¿ã„æ–¹',
        howTo1: 'TypeScriptã‚¨ãƒ©ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼',
        howTo2: 'å…¥åŠ›æ¬„ã«è²¼ã‚Šä»˜ã‘',
        howTo3: 'åˆ†æžãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯',
        howTo4: 'å•é¡Œç‚¹ã¨è§£æ±ºç­–ã‚’ç¢ºèª',
        aboutLink: 'ç´¹ä»‹',
        privacyLink: 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼',
        termsLink: 'åˆ©ç”¨è¦ç´„',
        alertEmpty: 'ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼',
        copied: 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼',
        foundProblems: 'ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ',
        arrayObjectMismatch: 'é…åˆ—ãŒå¿…è¦ãªå ´æ‰€ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã—ã¾ã—ãŸï¼',
        missingProp: 'æ¬ è½ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£',
        typeMismatch: 'åž‹ã®ä¸ä¸€è‡´',
        arrayMismatch: 'é…åˆ—/ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåž‹ã®ä¸ä¸€è‡´',
        genericError: 'ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åž‹ã‚¨ãƒ©ãƒ¼',
        unionError: 'ãƒ¦ãƒ‹ã‚ªãƒ³åž‹ã‚¨ãƒ©ãƒ¼',
        literalError: 'ãƒªãƒ†ãƒ©ãƒ«åž‹ã®ä¸ä¸€è‡´',
        moduleError: 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„',
        notFoundError: 'åå‰ãŒè¦‹ã¤ã‹ã‚‰ãªã„',
        overloadError: 'ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ãªã„',
        implicitAnyError: 'æš—é»™çš„ãªanyåž‹',
        providedType: 'æ¸¡ã•ã‚ŒãŸåž‹',
        expectedType: 'æœŸå¾…ã•ã‚Œã‚‹åž‹',
        solution: 'è§£æ±ºæ–¹æ³•',
        wrapArray: 'æ¬¡ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é…åˆ—ã§ãƒ©ãƒƒãƒ—ã—ã¦ãã ã•ã„ï¼š',
        wrongCode: '// é–“é•ã£ãŸã‚³ãƒ¼ãƒ‰',
        correctCode: '// æ­£ã—ã„ã‚³ãƒ¼ãƒ‰',
        viewFullError: 'å®Œå…¨ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º',
        requiredProps: 'å¿…è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£',
        array: 'é…åˆ—',
        object: 'ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ',
        string: 'æ–‡å­—åˆ—',
        number: 'æ•°å€¤',
        boolean: 'ãƒ–ãƒ¼ãƒ«',
        installModule: 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹ã€ãƒ‘ã‚¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š',
        checkName: 'å¤‰æ•°/åž‹ã®åå‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š',
        didYouMean: 'ã‚‚ã—ã‹ã—ã¦ï¼Ÿ'
    },
    zh: {
        title: 'TypeScript é”™è¯¯åˆ†æžå™¨',
        subtitle: 'åˆ†æžå¤æ‚çš„ç±»åž‹é”™è¯¯ï¼Œæ¸…æ¥šåœ°è¯†åˆ«å“ªäº›å­—æ®µæœ‰é—®é¢˜',
        inputTitle: 'è¾“å…¥é”™è¯¯æ¶ˆæ¯',
        inputPlaceholder: 'åœ¨æ­¤ç²˜è´´ TypeScript é”™è¯¯æ¶ˆæ¯...',
        analyzeBtn: 'åˆ†æžé”™è¯¯',
        clearBtn: 'æ¸…é™¤',
        sampleBtn: 'åŠ è½½ç¤ºä¾‹',
        resultTitle: 'åˆ†æžç»“æžœ',
        copyBtn: 'å¤åˆ¶',
        supportedTitle: 'ðŸŽ¯ æ”¯æŒçš„é”™è¯¯',
        supported1: 'æ•°ç»„/å¯¹è±¡ç±»åž‹ä¸åŒ¹é…',
        supported2: 'ç¼ºå°‘å±žæ€§é”™è¯¯',
        supported3: 'åµŒå¥—ç±»åž‹é”™è¯¯',
        supported4: 'è”åˆç±»åž‹é—®é¢˜',
        supported5: 'æ³›åž‹ç±»åž‹é”™è¯¯',
        supported6: 'å­—é¢é‡ç±»åž‹ä¸åŒ¹é…',
        supported7: 'æ‰¾ä¸åˆ°æ¨¡å—',
        supported8: 'æ‰¾ä¸åˆ°åç§°',
        howToTitle: 'ðŸ“– ä½¿ç”¨æ–¹æ³•',
        howTo1: 'å¤åˆ¶ TypeScript é”™è¯¯',
        howTo2: 'ç²˜è´´åˆ°è¾“å…¥æ¡†',
        howTo3: 'ç‚¹å‡»åˆ†æžæŒ‰é’®',
        howTo4: 'æŸ¥çœ‹é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ',
        aboutLink: 'å…³äºŽ',
        privacyLink: 'éšç§æ”¿ç­–',
        termsLink: 'æœåŠ¡æ¡æ¬¾',
        alertEmpty: 'è¯·è¾“å…¥é”™è¯¯æ¶ˆæ¯ï¼',
        copied: 'å·²å¤åˆ¶ï¼',
        foundProblems: 'å‘çŽ°çš„é—®é¢˜',
        arrayObjectMismatch: 'æ‚¨åœ¨éœ€è¦æ•°ç»„çš„åœ°æ–¹ä¼ é€’äº†å¯¹è±¡ï¼',
        missingProp: 'ç¼ºå°‘å±žæ€§',
        typeMismatch: 'ç±»åž‹ä¸åŒ¹é…',
        arrayMismatch: 'æ•°ç»„/å¯¹è±¡ç±»åž‹ä¸åŒ¹é…',
        genericError: 'æ³›åž‹ç±»åž‹é”™è¯¯',
        unionError: 'è”åˆç±»åž‹é”™è¯¯',
        literalError: 'å­—é¢é‡ç±»åž‹ä¸åŒ¹é…',
        moduleError: 'æ‰¾ä¸åˆ°æ¨¡å—',
        notFoundError: 'æ‰¾ä¸åˆ°åç§°',
        overloadError: 'æ²¡æœ‰åŒ¹é…çš„é‡è½½',
        implicitAnyError: 'éšå¼ any ç±»åž‹',
        providedType: 'æä¾›çš„ç±»åž‹',
        expectedType: 'æœŸæœ›çš„ç±»åž‹',
        solution: 'è§£å†³æ–¹æ¡ˆ',
        wrapArray: 'è¯·å°†ä»¥ä¸‹å±žæ€§åŒ…è£…åœ¨æ•°ç»„ä¸­ï¼š',
        wrongCode: '// é”™è¯¯ä»£ç ',
        correctCode: '// æ­£ç¡®ä»£ç ',
        viewFullError: 'æŸ¥çœ‹å®Œæ•´é”™è¯¯æ¶ˆæ¯',
        requiredProps: 'å¿…éœ€çš„å±žæ€§',
        array: 'æ•°ç»„',
        object: 'å¯¹è±¡',
        string: 'å­—ç¬¦ä¸²',
        number: 'æ•°å­—',
        boolean: 'å¸ƒå°”',
        installModule: 'å®‰è£…æ¨¡å—æˆ–æ£€æŸ¥è·¯å¾„ï¼š',
        checkName: 'æ£€æŸ¥å˜é‡/ç±»åž‹åç§°ï¼š',
        didYouMean: 'æ‚¨æ˜¯å¦æ˜¯æŒ‡ï¼Ÿ'
    }
};

let currentLang = localStorage.getItem('lang') ||
    (navigator.language.startsWith('ko') ? 'ko' :
     navigator.language.startsWith('ja') ? 'ja' :
     navigator.language.startsWith('zh') ? 'zh' : 'en');

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('lang', lang);
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (i18n[lang][key]) {
            el.textContent = i18n[lang][key];
        }
    });
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.dataset.i18nPlaceholder;
        if (i18n[lang][key]) {
            el.placeholder = i18n[lang][key];
        }
    });
    document.documentElement.lang = lang === 'zh' ? 'zh-CN' : lang;
}

function t(key) {
    return i18n[currentLang][key] || i18n['en'][key] || key;
}

// Initialize language from URL parameter
const urlParams = new URLSearchParams(window.location.search);
const langParam = urlParams.get('lang');
if (langParam && i18n[langParam]) {
    currentLang = langParam;
}
